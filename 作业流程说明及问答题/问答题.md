# GPU渲染管线流程

包括顶点处理、图元装配及光栅化、片元处理、输出合并

## 顶点处理

将顶点坐标从模型空间变换到裁剪空间

通过Model矩阵、View矩阵、Projection矩阵将物体分别从模型空间变换到世界空间、相机空间和裁剪空间。

## 图元装配

执行裁剪操作忽略摄像机视野外部的，再在裁剪空间的基础上，进行透视除法得到NDC坐标（为了实现屏幕坐标的转换与硬件无关），然后进行背面剔除，将背对摄像机的三角面剔除，之后通过视口转换得到屏幕坐标。

## 光栅化阶段

光栅化阶段完成的任务中包括对输出的顶点进行视口变化，将x、y坐标都以像素为单位表示。然后根据原顶点和图元，确定当前图元将会出现再待绘制纹理的哪些像素位置上，再根据图元的顶点信息，利用透视校正正插值法计算像素片段的位置、颜色等信息。



# 图元、片元和像素的区别

图元、片元、像素的生成有先后顺序:顶点-> 图元-> 片元-> 像素

图元由顶点组成，单个顶点、一个线段或一个三角形都可以成为图元。

片元是图元经过光栅化阶段后被分割成一个个像素大小，包含RGBA、深度值、法线、纹理坐标等信息的基本单位。

像素是片元经过一些测试后，抛弃法线、纹理坐标等不需要的信息后，成为的包含RGBA值的图像最小单元。